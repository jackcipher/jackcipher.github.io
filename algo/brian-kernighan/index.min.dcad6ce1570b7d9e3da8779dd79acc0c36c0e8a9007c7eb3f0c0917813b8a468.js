(function(){const t=document.getElementById("algo-brian-kernighan");if(!t)return;const n=t.querySelector("#bk-input"),s=t.querySelector("#bk-start"),r=t.querySelector("#bk-reset"),a=t.querySelector(".bk-bits-container"),o=t.querySelector("#bk-log"),c=t.querySelector("#bk-current-n"),l=t.querySelector("#bk-bin");let e=parseInt(n.value),d=!1;function i(e,t=0){a.innerHTML="";const n=e.toString(2).padStart(8,"0");c.textContent=e,l.textContent=n;for(let n=7;n>=0;n--){const o=e>>n&1,s=document.createElement("div");s.className="bk-bit"+(o?" set":""),s.textContent=o,t&1<<n&&s.classList.add("changed"),a.appendChild(s)}}async function u(){if(e<=0){o.textContent="演示结束：n 已变为 0。所有的 set bits 已被数完。",s.disabled=!0;return}const t=e,n=e&e-1,a=t^n;o.textContent=`执行 n & (n-1): ${t} & ${t-1} = ${n}。最右边的 set bit 已被清除。`,i(t,a),await new Promise(e=>setTimeout(e,600)),e=n,i(e),e<=0&&(o.textContent="演示结束：n 已变为 0。",s.disabled=!0)}s.addEventListener("click",()=>{const e=parseInt(n.value)||0;u()}),n.addEventListener("change",()=>{e=parseInt(n.value)||0,i(e),s.disabled=!1,o.textContent="输入已更新，请点击单步执行。"}),r.addEventListener("click",()=>{d=!1,s.disabled=!1,e=parseInt(n.value),e!=e&&(e=0),o.textContent="已重置。",i(e)}),i(e)})()