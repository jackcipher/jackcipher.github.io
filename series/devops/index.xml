<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>DevOps on Jack</title>
    <link>https://jackcipher.github.io/series/devops/</link>
    <description>Recent content in DevOps on Jack</description>
    <generator>Hugo -- 0.149.0</generator>
    <language>zh</language>
    <lastBuildDate>Thu, 04 Jan 2024 06:30:24 +0000</lastBuildDate>
    <atom:link href="https://jackcipher.github.io/series/devops/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>GitLab CI/CD 变量的用法</title>
      <link>https://jackcipher.github.io/devops/gitlab-ci-variable/</link>
      <pubDate>Thu, 04 Jan 2024 06:30:24 +0000</pubDate>
      <guid>https://jackcipher.github.io/devops/gitlab-ci-variable/</guid>
      <description>&lt;p&gt;CI/CD 变量是环境变量的一种，通过设置 CI/CD 变量可以：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;控制 job 与 pipeline 的行为&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;存储想复用的变量&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;避免在 .gitlab-ci.yml 文件中硬编码&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;CD/CD 的变量定义主要通过两种方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;通过配置文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通过项目设置&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;1-通过配置文件&#34;&gt;1. 通过配置文件&lt;/h2&gt;
&lt;p&gt;在 &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; 文件中，使用 &lt;code&gt;variables&lt;/code&gt; 关键词可以定义变量。&lt;/p&gt;</description>
    </item>
    <item>
      <title>构建跨平台 Go 服务</title>
      <link>https://jackcipher.github.io/devops/build-multiarch-go/</link>
      <pubDate>Wed, 20 Sep 2023 05:50:58 +0000</pubDate>
      <guid>https://jackcipher.github.io/devops/build-multiarch-go/</guid>
      <description>&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;
&lt;p&gt;过去，我一直在使用 x86_64 架构的 MacBook Pro 进行开发，服务器环境则是 x86_64 架构的 CentOS，因此从未担心过多架构的 Docker 镜像构建问题。&lt;/p&gt;
&lt;p&gt;然而，公司最近更新了一批 M1 MacBook Pro。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Docker 使用的一些总结</title>
      <link>https://jackcipher.github.io/devops/docker-review/</link>
      <pubDate>Mon, 09 Jan 2023 10:19:58 +0000</pubDate>
      <guid>https://jackcipher.github.io/devops/docker-review/</guid>
      <description>&lt;h2 id=&#34;悬挂镜像&#34;&gt;悬挂镜像&lt;/h2&gt;
&lt;p&gt;sonarnotify 在 CI/CD 中用到了 Docker 多阶段构建。&lt;/p&gt;
&lt;p&gt;在构建完成后，即使每次都删掉了构建后的镜像，通过 docker images 还是能发现一些标签为 &lt;none&gt; 的镜像。经过查阅资料发现，这些镜像称为悬挂镜像(dangling image)。&lt;/p&gt;</description>
    </item>
    <item>
      <title>容器抓包实战</title>
      <link>https://jackcipher.github.io/devops/tcpdump-in-action/</link>
      <pubDate>Tue, 30 Aug 2022 12:24:24 +0000</pubDate>
      <guid>https://jackcipher.github.io/devops/tcpdump-in-action/</guid>
      <description>&lt;h2 id=&#34;tcpdump-抓包&#34;&gt;tcpdump 抓包&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tcpdump -Xnlps0 -nn -iany port 9001 -w 9001.pcap
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;参数说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-X&lt;/code&gt;: 显示包的内容（十六进制和 ASCII）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-n&lt;/code&gt;: 不将地址转换为名字&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-l&lt;/code&gt;: 使标准输出行缓冲&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt;: 不让网卡进入混杂模式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-s0&lt;/code&gt;: 抓取完整的数据包&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-nn&lt;/code&gt;: 不将协议和端口转换为名字&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-iany&lt;/code&gt;: 监听所有网络接口&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-w&lt;/code&gt;: 将原始数据包写入文件&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;容器-debug&#34;&gt;容器 Debug&lt;/h2&gt;
&lt;h3 id=&#34;kubectl-debug&#34;&gt;Kubectl Debug&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;kubectl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;debug&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;it&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sentinel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;master&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ss&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;smvm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;appbase&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tools&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;latest&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;redis&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这个命令会创建一个新的容器，共享目标容器的网络、PID 和 IPC 命名空间，方便进行调试。&lt;/p&gt;</description>
    </item>
    <item>
      <title>ServiceAccount 的使用</title>
      <link>https://jackcipher.github.io/devops/service-account/</link>
      <pubDate>Thu, 10 Mar 2022 15:01:08 +0000</pubDate>
      <guid>https://jackcipher.github.io/devops/service-account/</guid>
      <description>&lt;h3 id=&#34;概念&#34;&gt;概念&lt;/h3&gt;
&lt;p&gt;Kubernetes 中，Pod 内部进程想要访问 API Server，就需要用到 ServiceAccount。ServiceAccount 类似业务系统里的账户，用于为 Pod 提供身份。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Docker 下 Filebeat 日志收集</title>
      <link>https://jackcipher.github.io/devops/docker-filebeat/</link>
      <pubDate>Sat, 05 Mar 2022 11:03:19 +0000</pubDate>
      <guid>https://jackcipher.github.io/devops/docker-filebeat/</guid>
      <description>&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;
&lt;p&gt;在收集服务端聊天消息日志时，用到了 Filebeat &lt;a href=&#34;https://www.elastic.co/guide/en/beats/filebeat/current/dissect.html&#34;&gt;dissect&lt;/a&gt; 语法，而这个语法是 Filebeat 6.4 及之后的版本支持。服务端部分机器的 Filebeat 版本为 6.3&lt;/p&gt;
&lt;p&gt;考虑到日志收集工作的普遍性，为了保持版本统一减少运维成本，特增加一种基于 Docker 实现的通用 Filebeat 日志收集方案。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
